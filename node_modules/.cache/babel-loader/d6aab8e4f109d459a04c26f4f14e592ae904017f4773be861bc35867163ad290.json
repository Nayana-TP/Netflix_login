{"ast":null,"code":"import _objectSpread from\"C:/Users/ntp94/OneDrive/Desktop/tmdb/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import'./Auth.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Auth=_ref=>{let{onAuthSuccess}=_ref;const[isLogin,setIsLogin]=useState(true);const[formData,setFormData]=useState({username:'',password:'',email:'',phoneNo:''});const[loading,setLoading]=useState(false);const[message,setMessage]=useState('');const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';const handleSubmit=async e=>{e.preventDefault();setLoading(true);setMessage('');try{const endpoint=isLogin?'/login':'/signup';const payload=isLogin?{username:formData.username,password:formData.password}:formData;console.log('Attempting to connect to:',\"\".concat(API_BASE_URL).concat(endpoint));console.log('Payload:',payload);const response=await fetch(\"\".concat(API_BASE_URL).concat(endpoint),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});console.log('Response status:',response.status);if(!response.ok){const errorData=await response.json();throw new Error(errorData.message||\"HTTP error! status: \".concat(response.status));}const data=await response.json();console.log('Response data:',data);if(data.success){if(isLogin){setMessage('Login successful! Redirecting...');setTimeout(()=>{onAuthSuccess(data.user);},1000);}else{setMessage('Signup successful! Please login.');setIsLogin(true);setFormData({username:'',password:'',email:'',phoneNo:''});}}else{setMessage(data.message);}}catch(error){console.error('Auth error:',error);if(error.message.includes('fetch')){setMessage('Cannot connect to server. Please ensure the backend is running on localhost:5000');}else{setMessage(error.message||'Network error. Please try again.');}}finally{setLoading(false);}};const toggleMode=()=>{setIsLogin(!isLogin);setMessage('');setFormData({username:'',password:'',email:'',phoneNo:''});};return/*#__PURE__*/_jsx(\"div\",{className:\"auth-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-glass\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"auth-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"netflix-logo\",children:\"NETFLIX\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"auth-title\",children:isLogin?'Sign In':'Sign Up'}),/*#__PURE__*/_jsx(\"p\",{className:\"auth-subtitle\",children:isLogin?'Enter your email and password to access your account':'Create your account to start watching'})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"auth-form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",value:formData.username,onChange:handleChange,placeholder:\"Username\",className:\"auth-input\",required:true})}),!isLogin&&/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:formData.email,onChange:handleChange,placeholder:\"Email\",className:\"auth-input\",required:true})}),!isLogin&&/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"phoneNo\",value:formData.phoneNo,onChange:handleChange,placeholder:\"Phone Number (Optional)\",className:\"auth-input\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:formData.password,onChange:handleChange,placeholder:\"Password\",className:\"auth-input\",required:true})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"auth-button\",disabled:loading,children:loading?'Please wait...':isLogin?'Sign In':'Sign Up'})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"auth-message \".concat(message.includes('successful')?'success':'error'),children:message}),/*#__PURE__*/_jsx(\"div\",{className:\"auth-toggle\",children:/*#__PURE__*/_jsxs(\"p\",{children:[isLogin?\"New to Netflix?\":\"Already have an account?\",/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:toggleMode,className:\"toggle-button\",children:isLogin?'Sign up now':'Sign in'})]})})]})});};export default Auth;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","Auth","_ref","onAuthSuccess","isLogin","setIsLogin","formData","setFormData","username","password","email","phoneNo","loading","setLoading","message","setMessage","handleChange","e","_objectSpread","target","name","value","API_BASE_URL","process","env","REACT_APP_API_URL","handleSubmit","preventDefault","endpoint","payload","console","log","concat","response","fetch","method","headers","body","JSON","stringify","status","ok","errorData","json","Error","data","success","setTimeout","user","error","includes","toggleMode","className","children","onSubmit","type","onChange","placeholder","required","disabled","onClick"],"sources":["C:/Users/ntp94/OneDrive/Desktop/tmdb/src/components/Auth.js"],"sourcesContent":["import React, { useState } from 'react';\nimport './Auth.css';\n\nconst Auth = ({ onAuthSuccess }) => {\n  const [isLogin, setIsLogin] = useState(true);\n  const [formData, setFormData] = useState({\n    username: '',\n    password: '',\n    email: '',\n    phoneNo: ''\n  });\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState('');\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\nconst handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setMessage('');\n\n    try {\n      const endpoint = isLogin ? '/login' : '/signup';\n      const payload = isLogin \n        ? { username: formData.username, password: formData.password }\n        : formData;\n\n      console.log('Attempting to connect to:', `${API_BASE_URL}${endpoint}`);\n      console.log('Payload:', payload);\n\n      const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(payload),\n      });\n\n      console.log('Response status:', response.status);\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || `HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      console.log('Response data:', data);\n\n      if (data.success) {\n        if (isLogin) {\n          setMessage('Login successful! Redirecting...');\n          setTimeout(() => {\n            onAuthSuccess(data.user);\n          }, 1000);\n        } else {\n          setMessage('Signup successful! Please login.');\n          setIsLogin(true);\n          setFormData({\n            username: '',\n            password: '',\n            email: '',\n            phoneNo: ''\n          });\n        }\n      } else {\n        setMessage(data.message);\n      }\n    } catch (error) {\n      console.error('Auth error:', error);\n      if (error.message.includes('fetch')) {\n        setMessage('Cannot connect to server. Please ensure the backend is running on localhost:5000');\n      } else {\n        setMessage(error.message || 'Network error. Please try again.');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const toggleMode = () => {\n    setIsLogin(!isLogin);\n    setMessage('');\n    setFormData({\n      username: '',\n      password: '',\n      email: '',\n      phoneNo: ''\n    });\n  };\n\n  return (\n    <div className=\"auth-container\">\n      <div className=\"auth-glass\">\n        <div className=\"auth-header\">\n          <h1 className=\"netflix-logo\">NETFLIX</h1>\n          <h2 className=\"auth-title\">\n            {isLogin ? 'Sign In' : 'Sign Up'}\n          </h2>\n          <p className=\"auth-subtitle\">\n            {isLogin \n              ? 'Enter your email and password to access your account' \n              : 'Create your account to start watching'\n            }\n          </p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"auth-form\">\n          <div className=\"form-group\">\n            <input\n              type=\"text\"\n              name=\"username\"\n              value={formData.username}\n              onChange={handleChange}\n              placeholder=\"Username\"\n              className=\"auth-input\"\n              required\n            />\n          </div>\n\n          {!isLogin && (\n            <div className=\"form-group\">\n              <input\n                type=\"email\"\n                name=\"email\"\n                value={formData.email}\n                onChange={handleChange}\n                placeholder=\"Email\"\n                className=\"auth-input\"\n                required\n              />\n            </div>\n          )}\n\n          {!isLogin && (\n            <div className=\"form-group\">\n              <input\n                type=\"tel\"\n                name=\"phoneNo\"\n                value={formData.phoneNo}\n                onChange={handleChange}\n                placeholder=\"Phone Number (Optional)\"\n                className=\"auth-input\"\n              />\n            </div>\n          )}\n\n          <div className=\"form-group\">\n            <input\n              type=\"password\"\n              name=\"password\"\n              value={formData.password}\n              onChange={handleChange}\n              placeholder=\"Password\"\n              className=\"auth-input\"\n              required\n            />\n          </div>\n\n          <button \n            type=\"submit\" \n            className=\"auth-button\"\n            disabled={loading}\n          >\n            {loading ? 'Please wait...' : (isLogin ? 'Sign In' : 'Sign Up')}\n          </button>\n        </form>\n\n        {message && (\n          <div className={`auth-message ${message.includes('successful') ? 'success' : 'error'}`}>\n            {message}\n          </div>\n        )}\n\n        <div className=\"auth-toggle\">\n          <p>\n            {isLogin ? \"New to Netflix?\" : \"Already have an account?\"}\n            <button \n              type=\"button\" \n              onClick={toggleMode}\n              className=\"toggle-button\"\n            >\n              {isLogin ? 'Sign up now' : 'Sign in'}\n            </button>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Auth;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}